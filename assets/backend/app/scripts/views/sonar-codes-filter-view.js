// Generated by CoffeeScript 1.6.2
define(['backbone', 'text!templates/sonar-codes-filter-template.html', 'moment'], function(Backbone, SonarCodesFilterTemplate, mm) {
  var View;

  View = Backbone.View.extend({
    id: 'sonar-codes-filter-view',
    events: {
      'click .box-header': 'minimize',
      'submit form.sonar-codes-filter': 'filter'
    },
    initialize: function() {
      return _.bindAll(this);
    },
    minimize: function(e) {
      var $target;

      e.preventDefault();
      $target = this.$el.find('.box-content');
      if ($target.is(':visible')) {
        this.$('.box-header .btn-minimize i').removeClass('icon-chevron-up').addClass('icon-chevron-down');
      } else {
        this.$('.box-header .btn-minimize i').removeClass('icon-chevron-down').addClass('icon-chevron-up');
      }
      return $target.slideToggle();
    },
    filter: function(e) {
      e.preventDefault();
      this.collection.filter = {
        name: this.$('#filter-name').val(),
        challenge: this.$('#filter-challenge').val(),
        data: this.$('#filter-data').val()
      };
      return this.collection.fetch();
    },
    render: function() {
      this.$el.html(SonarCodesFilterTemplate);
      this.delegateEvents();
      this.rendered = true;
      return this;
    }
  });
  return View;
});
