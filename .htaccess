RewriteEngine on
RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} !(/api/|/api$)
RewriteRule .* https://$1 [L,R=301,QSA]
RewriteCond $1 !^(index\.php|images|css|assets|uploads|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L]